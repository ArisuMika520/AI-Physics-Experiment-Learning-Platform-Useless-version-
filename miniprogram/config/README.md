# 扣子API配置说明

## 概述

本项目已集成扣子（Coze）AI智能体API，用于实现AI问答功能。在使用前，需要配置相关的API参数。

## 配置步骤

### 1. 获取访问令牌

1. 访问 [扣子开放平台](https://www.coze.cn/)
2. 登录并进入开发者控制台
3. 生成个人访问令牌（PAT）
4. 复制生成的令牌

### 2. 获取智能体ID

1. 在扣子平台创建或选择一个智能体
2. 进入智能体的开发页面
3. 从URL中获取bot_id，例如：`https://www.coze.cn/space/341****/bot/73428668*****`
4. 其中 `73428668*****` 就是智能体ID

### 3. 配置API参数

编辑 `coze-api.ts` 文件，替换以下参数：

```typescript
export const CozeAPIConfig = {
  // 替换为真实的访问令牌
  authorization: 'Bearer your_real_access_token_here',
  
  // 替换为真实的智能体ID
  botId: 'your_real_bot_id_here',
  
  // 替换为真实的用户ID（可以是固定字符串或动态生成）
  userId: 'your_user_id_here',
  
  // 其他配置保持默认即可
};
```

### 4. 发布智能体

确保智能体已发布为API服务：

1. 在智能体开发页面点击「发布」
2. 选择「API服务」
3. 完成发布流程

## API限制

- 工作流相关API请求体大小限制：20MB
- 其他类别API请求体大小限制：15MB
- 请求超时时间：30秒

## 错误处理

系统已内置多层错误处理机制：

1. **网络错误**：自动重试并显示网络错误提示
2. **API错误**：回退到模拟响应，确保用户体验
3. **超时错误**：显示超时提示并提供重试选项
4. **未知错误**：通用错误处理和用户提示

## 安全注意事项

⚠️ **重要提醒**：

1. **不要将真实的访问令牌提交到版本控制系统**
2. **在生产环境中使用环境变量或安全的配置管理方案**
3. **定期轮换访问令牌**
4. **限制API访问权限**

## 测试

配置完成后，可以在实验学习页面的AI问答模块进行测试：

1. 输入测试问题
2. 点击发送按钮
3. 观察AI回复是否正常

如果遇到问题，请检查：
- 访问令牌是否正确
- 智能体ID是否正确
- 智能体是否已发布为API服务
- 网络连接是否正常

## 技术支持

如需更多帮助，请参考：
- [扣子API文档](https://www.coze.cn/docs/developer_guides/api_overview)
- [OAuth应用管理](https://www.coze.cn/docs/developer_guides/oauth_apps)